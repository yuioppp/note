
## NeRF 如何表示三维场景
三维场景的表示方法可以分为显式表达和隐式表达，显式表达能够直接看到场景的三维表示，主要有网格、点云、体素等，隐式表示通常是用一个函数来描述场景几何，比如符号距离场。  
NeRF 用多层感知机来模拟函数，实现隐式表示。它的输入是采样点的五维坐标，包括三维位置信息和视角方向，输出是颜色和密度值。  
其中多层感知机的结构是这样的。首先通过位置编码对三维位置和视角方向进行处理，得到编码后的信息。这里进行位置编码的主要原因是为了让多层感知机更有效地学习到高频的特征，然后将 gamma(x) 输入到 8 层全连接层中，并将输入拼接到第5个全连接层的输出中。在第 8 个全连接层后添加一个新的全连接层，该层不经过激活函数（橙色箭头）。其输出为维度 256 的中间特征 Ft 和体密度 sigma（可近似理解为不透明度，值越小越透明）。将编码后的视角方向和中间特征拼接起来，然后送入输出通道数为 128 的全连接层中，再经过激活函数处理得到特征，再经过全连接层和 sigmoid 激活函数（黑色虚箭头）处理得到三维的 RGB 输出。  
## NeRF 如何渲染出二维图像
NeRF 基于经典的体渲染，提出了一种可微渲染的流程。  
体渲染主要是通过对光线上的点进行采样和积分来得到点的颜色值。对于反映在图像上的一个像素点来说，有一条相机发出的射线穿过三维场景，这个像素点的颜色计算的公式就是这个：其中 Cr 是该像素的颜色值，r 是相机射线，o是相机位置，d 是视角方向向量，tn 和 tf 是近界和远界，Tt 是沿射线的累积透射率，就是射线从 tn 到 t 不碰到场景中粒子的概率，前面累计的体积密度σ 越大， Tt 越小。当前区域的 σ 越大，对颜色的影响就越大。T*σ 相当于该点的权重。  
PSNR 一般用于衡量最大值信号和背景噪音之间的图像质量参考值，值越大，图像失真越少。一般来说，PSNR 高于 40dB 说明图像质量几乎与原图一样好。SSIM是一种衡量两幅图像相似度的指标，范围为[0,1]，越大代表图像越相似。SSIM 将失真表示为亮度、对比度和结构三个不同因素的组合。用均值作为亮度的估计，标准差作为对比度的估计，协方差作为结构相似程度的度量。μ：平均亮度，σ：灰度标准差  
