## Linux 文件系统
在 Linux 操作系统中，一切被操作系统管理的资源，如网卡、磁盘驱动器、打印机、输入输出设备、普通文件或目录等，都被视为文件

### 文件存储
- 硬盘的最小存储单位是扇区(Sector)，每个扇区存储 512 字节   
- 块(block)由多个扇区组成，文件数据存储在块中。块的大小一般为 4kb，约为 8 个连续的扇区组成   
- 一个文件可能会占用多个 block，但是一个块只能存放一个文件  

### 文件类型
- 普通文件（-）：用于存储信息和数据， Linux 用户可以根据访问权限对普通文件进行查看、更改和删除。如图片、声音、PDF、text、视频、源代码等
- 目录文件（d，directory file）：用于表示和管理系统中的文件，目录文件中包含一些文件名和子目录名
- 符号链接文件（l，symbolic link）：保留了指向文件的地址而不是文件本身
- 字符设备（c，char）：用来访问字符设备，如键盘
- 设备文件（b，block）：用来访问块设备，如硬盘、软盘
- 管道文件(p，pipe) : 一种特殊类型的文件，用于进程之间的通信
- 套接字文件(s，socket)：用于进程间的网络通信，也可以用于本机之间的非网络通信

### inode
inode（index node）是 Linux/Unix 文件系统的基础。inode 是用来存储文件的元信息（metadata）的区域，每个文件都有一个唯一的 inode。inode 维护某个文件被分成几块、每块的地址、文件拥有者、创建时间、权限、大小等信息  
- inode 是一种固定大小的数据结构，其大小在文件系统创建时就确定了，并且在文件的生命周期内保持不变  
- inode 访问速度非常快，因为系统可以直接通过 inode 号码定位到文件的元数据信息，无需遍历整个文件系统  
- inode 的数量有限，每个文件系统只能包含固定数量的 inode，当文件系统中的 inode 用完时，无法再创建新的文件或目录，即使磁盘上还有可用空间

可以使用 stat 命令可以查看文件的 inode 信息，包括文件的 inode 号、文件类型、权限、所有者、文件大小、修改时间  

### 硬链接和软链接
在 Linux/类 Unix 系统中，文件链接（File Link）是一种特殊的文件类型，可以在文件系统中指向另一个文件
#### 硬链接（Hard Link）
- 在 Linux/类 Unix 文件系统中，每个文件和目录都有一个唯一的索引节点（inode）号，用来标识该文件或目录  
- 硬链接通过 inode 节点号建立连接，硬链接和源文件的 inode 节点号相同，两者对文件系统来说是完全平等的（可以看作是互为硬链接，源头是同一份文件），删除其中任何一个对另外一个没有影响，可以通过给文件设置硬链接文件来防止重要文件被误删  
- 只有删除了源文件和所有对应的硬链接文件，该文件才会被真正删除  
- 不能对目录以及不存在的文件创建硬链接，硬链接也不能跨越文件系统  
- 使用 ln 命令创建硬链接  
#### 软链接（Symbolic Link 或 Symlink）
- 软链接和源文件的 inode 节点号不同，而是指向一个文件路径  
- 源文件删除后，软链接依然存在，但是指向的是一个无效的文件路径，类似于 Windows 系统中的快捷方式  
- 可以对目录或者不存在的文件创建软链接，软链接可以跨越文件系统  
- 使用 ln -s 命令创建软链接  

### 文件权限
#### 查看
使用 ls -l 命令查看某个目录下的文件或目录的权限  
[![image.png](https://i.postimg.cc/Wzvmn7SH/image.png)](https://postimg.cc/xJ6bjMwv)
#### 修改
使用 chmod 修改文件/目录的权限：  
示例：修改 /test 下的 aaa.txt 的权限为文件所有者有全部权限，文件所有者所在的组有读写权限，其他用户只有读的权限：  
chmod u=rwx,g=rw,o=r aaa.txt 或者 chmod 764 aaa.txt


## 常用命令

### 文件操作
- touch [选项] 文件名：创建新文件或更新已存在文件。例如：touch file1.txt file2.txt file3.txt ，创建 3 个文件
- ln [选项] <源文件> <硬链接/软链接文件>：创建硬链接/软链接。例如：ln -s file.txt file_link，创建名为 file_link 的软链接，指向 file.txt 文件。-s 代表创建软链接，s 即 symbolic（软链接又名符号链接） 
- cat/more/less/tail 文件名：文件查看。命令 tail -f 文件可以对某个文件进行动态监控。日志随程序的运行发生变化，可以使用 tail -f catalina-2016-11-11.log 监控文件的变化 
- vim 文件名：修改文件内容。修改文件步骤：vim 文件-->进入文件-->命令模式-->按i进入编辑模式-->编辑文件-->按Esc进入底行模式-->输入：wq/q! （输入 wq 代表写入内容并退出，即保存；输入 q!代表强制退出不保存）。

### 系统状态
- top [选项]：用于实时查看系统的 CPU 使用率、内存使用率、进程信息等。
- htop [选项]：类似于 top，但提供了更加交互式和友好的界面，可让用户交互式操作，支持颜色主题，可横向或纵向滚动浏览进程列表，并支持鼠标操作
- uptime [选项]：用于查看系统总共运行了多长时间、系统的平均负载等信息
- vmstat [间隔时间] [重复次数]：vmstat （Virtual Memory Statistics）显示虚拟内存状态，可以报告关于进程、内存、I/O 等系统整体运行状态
- free [选项]：查看系统的内存使用情况，包括已用内存、可用内存、缓冲区和缓存等
- df [选项] [文件系统]：查看系统的磁盘空间使用情况，包括磁盘空间的总量、已使用量和可用量等，可以指定文件系统。例如：df -a，查看全部文件系统
- du [选项] [文件]：查看指定目录或文件的磁盘空间使用情况
- sar [选项] [时间间隔] [重复次数]：用于收集、报告和分析系统的性能统计信息，包括系统的 CPU 使用、内存使用、磁盘 I/O、网络活动等详细信息。它的特点是可以连续对系统取样，获得大量的取样数据。取样数据和分析的结果都可以存入文件，使用它时消耗的系统资源很小。
- ps [选项]：查看系统中的进程信息，包括进程的 ID、状态、资源使用情况等。ps -ef/ps -aux：这两个命令都是查看当前系统正在运行进程，两者的区别是展示格式不同。如果想要查看特定的进程可以使用这样的格式：ps aux|grep redis （查看包括 redis 字符串的进程），也可使用 pgrep redis -a。
- systemctl [命令] [服务名称]：管理系统的服务和单元，可以查看系统服务的状态、启动、停止、重启等

### 网络通信
- ping [选项] 目标主机：测试与目标主机的网络连接
- ifconfig 或 ip：查看系统的网络接口信息，包括网络接口的 IP 地址、MAC 地址、状态等
- netstat [选项]：查看系统的网络连接状态和网络统计信息，可以查看当前的网络连接情况、监听端口、网络协议等
- ss [选项]：提供了更快速、更详细的网络连接信息

